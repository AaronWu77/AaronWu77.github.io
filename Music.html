<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Playlist - Yuchen Wu</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* 音乐播放器专有样式 - 继承 Cyberpunk 风格 */
        .music-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* 顶部播放器面板 */
        .player-card {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #333;
            border-bottom: 2px solid #00f3ff; /* 青色底部强调 */
            padding: 30px;
            border-radius: 8px;
            backdrop-filter: blur(8px);
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.1);
            text-align: center;
        }

        .track-info h2 {
            margin: 0 0 10px 0;
            color: #fff;
            text-shadow: 0 0 5px #00f3ff;
            font-size: 1.8rem;
        }

        .track-info p {
            color: #bc13fe;
            font-size: 1.1rem;
            margin-bottom: 25px;
        }

        /* 进度条样式 */
        .progress-container {
            background: #333;
            height: 6px;
            width: 100%;
            border-radius: 3px;
            cursor: pointer;
            margin-bottom: 20px;
            position: relative;
        }

        .progress-bar {
            background: #00f3ff;
            height: 100%;
            width: 0%; /* 动态控制 */
            border-radius: 3px;
            box-shadow: 0 0 10px #00f3ff;
            transition: width 0.1s linear;
        }

        /* 控制按钮区域 */
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }

        .control-btn {
            background: none;
            border: 1px solid #555;
            color: #e0e0e0;
            font-size: 1.5rem;
            cursor: pointer;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            border-color: #bc13fe;
            color: #bc13fe;
            box-shadow: 0 0 10px rgba(188, 19, 254, 0.4);
            transform: scale(1.1);
        }

        .play-btn {
            border-color: #00f3ff;
            color: #00f3ff;
            font-size: 2rem;
            width: 65px;
            height: 65px;
        }

        .play-btn:hover {
            border-color: #00f3ff;
            background: rgba(0, 243, 255, 0.1);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.5);
        }

        /* 播放列表样式 */
        .playlist {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .playlist-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #333;
            background: rgba(255, 255, 255, 0.02);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .playlist-item:first-child {
            border-top: 1px solid #333;
        }

        .playlist-item:hover {
            background: rgba(188, 19, 254, 0.1);
            padding-left: 25px; /* 悬停右移效果 */
        }

        .playlist-item.active {
            border-left: 3px solid #00f3ff;
            background: rgba(0, 243, 255, 0.05);
            color: #00f3ff;
        }

        .song-title {
            font-weight: bold;
        }
        
        .song-artist {
            font-size: 0.85rem;
            color: #888;
            margin-right: 15px;
        }

        .visualizer {
            height: 30px;
            display: flex;
            align-items: flex-end;
            gap: 3px;
        }
        
        .bar {
            width: 3px;
            background: #bc13fe;
            animation: equalizer 1s ease-in-out infinite;
        }
        
        @keyframes equalizer {
            0%, 100% { height: 2px; }
            50% { height: 20px; }
        }

        /* 导航按钮 */
        .back-nav {
            margin: 20px auto; 
            max-width: 800px;
            padding: 0 20px;
        }
        .back-link {
            display: inline-block;
            color: #bc13fe;
            text-decoration: none;
            border: 1px solid #bc13fe;
            padding: 8px 15px;
            transition: all 0.3s;
        }
        .back-link:hover {
            background: rgba(188, 19, 254, 0.1);
            box-shadow: 0 0 10px rgba(188, 19, 254, 0.3);
        }
    </style>
</head>
<body>
    <div class="background-glow"></div>
    
    <!-- 返回导航 -->
    <div class="back-nav">
        <a href="index.html" class="back-link">&larr; Back to Home</a>
    </div>

    <div class="header">
        <h1>My Playlist</h1>
        <p>Cool Version</p>
    </div>

    <div class="music-container">
        <!-- 播放器核心区域 -->
        <div class="player-card">
            <div class="track-info">
                <h2 id="current-title">Select a song</h2>
                <p id="current-artist">-</p>
            </div>
            
            <audio id="audio-player"></audio>

            <div class="progress-container" id="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div class="controls">
                <button class="control-btn" id="prev-btn" title="Previous">⏮</button>
                <button class="control-btn play-btn" id="play-btn" title="Play/Pause">►</button>
                <button class="control-btn" id="next-btn" title="Next">⏭</button>
            </div>
        </div>

        <!-- 播放列表 -->
        <ul class="playlist" id="playlist">
            <!-- 列表项将由 JS 动态生成 -->
        </ul>
    </div>

    <!-- 基础脚本：引入赛博背景动画 + 音乐播放逻辑 -->
    <script src="script.js"></script>
    <script>
        // --- 音乐播放器逻辑 ---
        
        // 模拟歌曲数据 (用户后续可替换为真实文件路径)
        const songs = [
            {
                title: "nobody",
                artist: "oskar med k,Khalid",
                src: "./Music/oskar med k,Khalid - nobody (make me feel).flac"
            },
            {
                title: "Neon Tears",
                artist: "Anten",
                src: "./Music/Antent - Neon Tears.flac" 
            },
        ];

        const audio = document.getElementById('audio-player');
        const playBtn = document.getElementById('play-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const titleEl = document.getElementById('current-title');
        const artistEl = document.getElementById('current-artist');
        const playlistEl = document.getElementById('playlist');

        let songIndex = 0;
        let isPlaying = false;

        // 初始化播放列表
        function initPlaylist() {
            playlistEl.innerHTML = '';
            songs.forEach((song, index) => {
                const li = document.createElement('li');
                li.classList.add('playlist-item');
                if (index === songIndex) li.classList.add('active');
                
                li.innerHTML = `
                    <div>
                        <span class="song-title">${song.title}</span> <br>
                        <span class="song-artist">${song.artist}</span>
                    </div>
                `;
                
                // 点击切歌
                li.addEventListener('click', () => {
                    loadSong(index);
                    playSong();
                });
                
                playlistEl.appendChild(li);
            });
        }

        // 加载歌曲信息
        function loadSong(index) {
            songIndex = index;
            const song = songs[songIndex];
            titleEl.innerText = song.title;
            artistEl.innerText = song.artist;
            if (song.src) {
                audio.src = song.src;
            } else {
                console.log("No source for this demo song.");
            }
            
            // 更新播放列表高亮
            updatePlaylistHighlight();
            
            // 重置进度条
            progressBar.style.width = '0%';
        }
        
        function updatePlaylistHighlight() {
            const items = document.querySelectorAll('.playlist-item');
            items.forEach((item, index) => {
                if (index === songIndex) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }

        // 播放相关控制
        function playSong() {
            isPlaying = true;
            playBtn.innerText = '⏸'; // 只有字符图标，暂不依赖外部库
            if (audio.src) audio.play();
        }

        function pauseSong() {
            isPlaying = false;
            playBtn.innerText = '►';
            audio.pause();
        }

        playBtn.addEventListener('click', () => {
            if (isPlaying) {
                pauseSong();
            } else {
                playSong();
            }
        });

        // 切歌逻辑
        function prevSong() {
            songIndex--;
            if (songIndex < 0) {
                songIndex = songs.length - 1;
            }
            loadSong(songIndex);
            if(isPlaying) playSong();
        }

        function nextSong() {
            songIndex++;
            if (songIndex > songs.length - 1) {
                songIndex = 0;
            }
            loadSong(songIndex);
            if(isPlaying) playSong();
        }

        prevBtn.addEventListener('click', prevSong);
        nextBtn.addEventListener('click', nextSong);

        // 进度更新
        audio.addEventListener('timeupdate', (e) => {
            const { duration, currentTime } = e.srcElement;
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
        });
        
        // 点击进度条跳转
        progressContainer.addEventListener('click', (e) => {
            const width = progressContainer.clientWidth;
            const clickX = e.offsetX;
            const duration = audio.duration;
            if(duration) {
                audio.currentTime = (clickX / width) * duration;
            }
        });

        // 自动连播
        audio.addEventListener('ended', nextSong);

        // 初始化
        initPlaylist();
        loadSong(songIndex);

    </script>
</body>
</html>